(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0297":function(t,e,o){"use strict";o("1203")},"0b42":function(t,e,o){var n=o("861d"),r=o("e8b5"),i=o("b622"),a=i("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)?n(e)&&(e=e[a],null===e&&(e=void 0)):e=void 0),void 0===e?Array:e}},1203:function(t,e,o){},"159b":function(t,e,o){var n=o("da84"),r=o("fdbc"),i=o("785a"),a=o("17c2"),l=o("9112"),s=function(t){if(t&&t.forEach!==a)try{l(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in r)s(n[u]&&n[u].prototype);s(i)},"17c2":function(t,e,o){"use strict";var n=o("b727").forEach,r=o("a640"),i=r("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},2017:function(t,e,o){"use strict";o("cafe")},"24d2":function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("751a"),r=function(t){return n["a"].request({url:"/project/selectAll",method:"post",data:t})}},"327f":function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),o.d(e,"c",(function(){return i})),o.d(e,"b",(function(){return a})),o.d(e,"d",(function(){return l}));var n=o("751a"),r=function(t){return n["a"].request({url:"/wo/addNewWO",method:"post",data:t})},i=function(t){return n["a"].request({url:"/wo/quaryByInfo",method:"post",data:t})},a=function(t){return n["a"].request({url:"/wo/updateWoInfoById",method:"post",data:t})},l=function(t){return n["a"].request({url:"/wo/updateWoOfStatus",method:"post",data:t})}},3454:function(t,e,o){},"55a9":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"woQuery"},[o("el-container",[o("el-header",[o("div",{staticClass:"w"},[o("el-switch",{attrs:{"active-text":"打开筛选器"},on:{click:function(e){t.drawer=!0}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}})],1)]),o("el-main",[o("woInfo",{attrs:{woDetail:t.woInfo_query}})],1),o("el-drawer",{attrs:{size:"50rem",title:"我是标题",visible:t.drawer,"with-header":!1},on:{"update:visible":function(e){t.drawer=e}}},[o("span",[o("woList",{attrs:{offDrawer:t.offDrawer},on:{getdetail:t.getWodetail}})],1)])],1)],1)},r=[],i=(o("159b"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"woInfo"},[t.woDetail?o("div",{staticClass:"w"},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.woInfo_loading,expression:"woInfo_loading"}],ref:"form",attrs:{model:t.woDetail,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"当前状态"}},[o("el-steps",{attrs:{space:200,active:t.woDetail.status,"finish-status":"success"}},t._l(t.status_title,(function(t,e){return o("el-step",{key:"status"+e,attrs:{title:t}})})),1)],1),t.woDetail.status<5?o("el-form-item",{attrs:{label:"表单处理"}},[o("el-button",{on:{click:function(e){return t.handleWo(!0)}}},[t._v(t._s(t.status_submit_title[t.woDetail.status]))]),3==t.woDetail.status?o("el-button",{on:{click:function(e){return t.handleWo(!1)}}},[t._v("重新处理")]):t._e(),4==t.woDetail.status?o("el-button",{on:{click:function(e){return t.handleWo(!1)}}},[t._v(t._s(t.status_submit_title[t.woDetail.status+1]))]):t._e()],1):t._e(),o("el-form-item",{attrs:{label:"工单名称"}},[o("el-input",{model:{value:t.woDetail.title,callback:function(e){t.$set(t.woDetail,"title",e)},expression:"woDetail.title"}})],1),o("el-form-item",{attrs:{label:"所属项目"}},[o("el-select",{attrs:{placeholder:"请选择项目"},model:{value:t.woDetail.project.id,callback:function(e){t.$set(t.woDetail.project,"id",e)},expression:"woDetail.project.id"}},t._l(t.project_ops,(function(t,e){return o("el-option",{key:"pro"+e,attrs:{label:t.title,value:t.id}})})),1)],1),o("el-form-item",{attrs:{label:"当前处理人"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){t.isDistribute=!t.isDistribute}}}),t._l(t.woDetail.handlers,(function(e,n){return o("span",{key:"hander"+n},[o("span",[t._v(t._s(" "))]),o("el-link",{attrs:{type:"info"}},[t._v(t._s(e.handler_name))])],1)}))],2),t.isDistribute?o("el-form-item",{attrs:{label:"重新分配"}},[o("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择coder"},model:{value:t.woDetail.handlers_ids,callback:function(e){t.$set(t.woDetail,"handlers_ids",e)},expression:"woDetail.handlers_ids"}},t._l(t.hander_options,(function(t){return o("el-option",{key:t.coder_id,attrs:{label:t.admin_name,value:t.id}})})),1)],1):t._e(),o("el-form-item",{attrs:{label:"预计时间"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.woDetail.estimate_time,callback:function(e){t.$set(t.woDetail,"estimate_time",e)},expression:"woDetail.estimate_time"}})],1),o("el-form-item",{attrs:{label:"完成时间"}},[t._v(t._s(t.woDetail.over_time?t.woDetail.over_time:"暂未完成"))]),o("el-form-item",[o("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{focus:function(e){return t.onEditorFocus(e)},blur:function(e){return t.onEditorBlur(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.woDetail.content,callback:function(e){t.$set(t.woDetail,"content",e)},expression:"woDetail.content"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.updateWo}},[t._v("保存")]),o("el-button",[t._v("取消")])],1)],1)],1):t._e()])}),a=[],l=o("327f"),s=o("2612"),u=o("24d2"),c={props:["woDetail"],created:function(){this.getHandlers(),this.getProjectList()},mounted:function(){this.editor=this.$refs.myQuillEditor.quill},components:{},data:function(){return{status_title:["未分配","待处理","正在处理","待验证","正在验证","已完成"],status_submit_title:["分配","开始处理","提交处理","开始验证","验证通过","验证不通过"],isDistribute:!1,editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},hander_options:[],value:"",project_ops:[],woInfo_loading:!1}},beforeDestroy:function(){this.editor=null,delete this.editor},methods:{getProjectList:function(){var t=this;Object(u["a"])({}).then((function(e){t.project_ops=e.data})).catch((function(e){t.$message.error("获取项目列表失败")}))},onEditorReady:function(t){},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorChange:function(t){},updateWo:function(){var t=this;if(this.woDetail.handlers_ids.indexOf(JSON.parse(sessionStorage.getItem("me")).id)<0&&JSON.parse(sessionStorage.getItem("me")).id!=this.woDetail.creator_id)return this.$message.error("您无权更改此工单"),!1;var e={id:this.woDetail.id,title:this.woDetail.title,detail:this.woDetail.content,distributPeople:this.woDetail.handlers_ids,handler_id:JSON.parse(sessionStorage.getItem("me")).id};Object(l["b"])(e).then((function(e){t.$message({message:"更新成功",type:"success"})})).catch((function(e){t.$message.error("更新失败")}))},getHandlers:function(){var t=this;Object(s["b"])().then((function(e){t.hander_options=e.data})).catch((function(t){console.log(t)}))},handleWo:function(t){var e=this;switch(this.woInfo_loading=!0,this.woDetail.status){case 0:if(this.woDetail.handlers_ids.length=0)return this.$message.error("请添加处理人"),!1;break;default:break}var o={id:this.woDetail.id,admin_id:JSON.parse(sessionStorage.getItem("me")).id,status:this.woDetail.status,flag:t};Object(l["d"])(o).then((function(t){setTimeout((function(){e.woDetail.status=t.data.code,e.woInfo_loading=!1}),500)})).catch((function(t){e.$message.error("处理失败")}))}}},d=c,f=(o("c5cb"),o("2877")),m=Object(f["a"])(d,i,a,!1,null,null,null),p=m.exports,h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wolist"},[o("el-cascader",{attrs:{options:t.conditions,"show-all-levels":!1},on:{change:function(e){return t.getWoList(t.screen[1])}},model:{value:t.screen,callback:function(e){t.screen=e},expression:"screen"}}),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.woList_loading,expression:"woList_loading"}],staticStyle:{width:"100%"},attrs:{data:t.woList,stripe:"",height:"800",border:""}},[o("el-table-column",{attrs:{prop:"title",label:"工单名",width:"180"}}),o("el-table-column",{attrs:{prop:"id",label:"工单号"}}),o("el-table-column",{attrs:{prop:"status_title",label:"进度"}}),o("el-table-column",{attrs:{prop:"project_id",label:"所属项目"}}),o("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1)],1)},b=[],_={created:function(){},props:["offDrawer"],computed:{},data:function(){return{status_title:["未分配","待处理","正在处理","待验证","正在验证","已完成"],woList:[],woList_loading:!1,conditions:[{value:"",label:"我的工单",children:[{value:{handler_id:JSON.parse(sessionStorage.getItem("me")).id,status:1},label:"待处理"},{value:{handler_id:JSON.parse(sessionStorage.getItem("me")).id,status:2},label:"正在处理"},{value:{handler_id:JSON.parse(sessionStorage.getItem("me")).id,status:3},label:"待验证"},{value:{handler_id:JSON.parse(sessionStorage.getItem("me")).id,status:4},label:"正在验证"},{value:{handler_id:JSON.parse(sessionStorage.getItem("me")).id,status:5},label:"已完成"}]},{value:"",label:"全部工单",children:[{value:{},label:"无条件"},{value:{status:0},label:"未分配"},{value:{status:1},label:"待处理"},{value:{status:2},label:"正在处理"},{value:{status:3},label:"待验证"},{value:{status:4},label:"正在验证"},{value:{status:5},label:"已完成"}]}],screen:{}}},methods:{handleEdit:function(t){this.offDrawer(),this.$emit("getdetail",t)},getWoList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.woList_loading=!0,Object(l["c"])(e).then((function(e){setTimeout((function(){t.woList_loading=!1,t.woList=e.data,e.data.forEach((function(e,o){t.woList[o].status_title=t.status_title[e.status]}))}),500)})).catch((function(t){console.log(t)}))}}},v=_,w=(o("0297"),Object(f["a"])(v,h,b,!1,null,null,null)),g=w.exports,y={components:{woInfo:p,woList:g},data:function(){return{drawer:!1,woInfo_query:{title:"",id:"",project:{id:null,title:"项目1"},handler:{handler_id:0,handler_name:""},handlers:[],handlers_ids:[],create_time:"",estimate_time:"",creator_id:"",over_time:"",status:0,delivery:!1,type:[],resource:"",desc:"",content:""}}},methods:{getWodetail:function(t){var e=this;t.handlers.forEach((function(o,n){e.woInfo_query.handlers_ids[n]=t.handlers[n].handler_id})),this.woInfo_query.id=t.id,this.woInfo_query.title=t.title,this.woInfo_query.project=JSON.parse(JSON.stringify(t.project_info)),this.woInfo_query.creator_id=t.creator_id,this.woInfo_query.create_time=t.create_time,this.woInfo_query.status=t.status,this.woInfo_query.handler=JSON.parse(JSON.stringify(t.handler)),this.woInfo_query.handlers=t.handlers,this.woInfo_query.content=t.detail},offDrawer:function(){this.drawer=!1}}},k=y,x=(o("7689"),Object(f["a"])(k,n,r,!1,null,null,null));e["default"]=x.exports},"65f0":function(t,e,o){var n=o("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6623:function(t,e,o){},7689:function(t,e,o){"use strict";o("3454")},"80d2":function(t,e,o){"use strict";o("a5d8")},"9ed6":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loginpage"},[o("div",{staticClass:"title"},[t._v("WO系统")]),o("div",{staticClass:"loginbox"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"账号",prop:"account"}},[o("el-input",{model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",t._n(e))},expression:"ruleForm.account"}})],1),o("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.pwd,callback:function(e){t.$set(t.ruleForm,"pwd",e)},expression:"ruleForm.pwd"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"medium "},on:{click:function(e){return t.loginsubmit("ruleForm")}}},[t._v("登录")])],1)],1)],1)])},r=[],i=(o("d3b7"),o("bc3a")),a=o.n(i);a.a.defaults.baseURL="http://139.155.247.54:8888",a.a.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)})),a.a.interceptors.response.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)}));var l=a.a,s=function(t){return l.request({url:"/admin/login",method:"post",data:t})},u={data:function(){var t=function(t,e,o){if(!e)return o(new Error("账号不能为空"));o()},e=function(t,e,o){""===e?o(new Error("请输入密码")):o()};return{ruleForm:{pwd:"",account:""},rules:{pwd:[{validator:e,trigger:"blur"}],account:[{validator:t,trigger:"blur"}]}}},methods:{tokencheck:function(){},loginsubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;var o={admin_name:e.ruleForm.account,admin_password:e.ruleForm.pwd};s(o).then((function(t){console.log(t),localStorage.setItem("token",t.data.token),sessionStorage.setItem("me",JSON.stringify(t.data.data)),e.$router.push("/")})).catch((function(t){e.$notify.error({title:"登陆失败",message:"请检查用户名和密码是否正确"}),console.log("error submit!!")}))}))}}},c=u,d=(o("2017"),o("2877")),f=Object(d["a"])(c,n,r,!1,null,null,null);e["default"]=f.exports},a5d8:function(t,e,o){},a640:function(t,e,o){"use strict";var n=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&n((function(){o.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,o){var n=o("83ab"),r=o("9bf2").f,i=Function.prototype,a=i.toString,l=/^\s*function ([^ (]*)/,s="name";n&&!(s in i)&&r(i,s,{configurable:!0,get:function(){try{return a.call(this).match(l)[1]}catch(t){return""}}})},b3d7:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[t._v("个人中心")]),o("el-menu-item",{attrs:{index:"1-1"}},[t._v("我的工单")]),o("el-menu-item",{attrs:{index:"1-2"}},[t._v("我的详情")]),o("el-menu-item",{attrs:{index:"1-3"}},[t._v("选项3")]),o("el-submenu",{attrs:{index:"1-4"}},[o("template",{slot:"title"},[t._v("选项4")]),o("el-menu-item",{attrs:{index:"1-4-1"}},[t._v("选项1")]),o("el-menu-item",{attrs:{index:"1-4-2"}},[t._v("选项2")]),o("el-menu-item",{attrs:{index:"1-4-3"}},[t._v("选项3")])],2),o("el-menu-item",{attrs:{index:"1-5"},on:{click:t.logout}},[t._v("退出账户")])],2),o("el-menu-item",{attrs:{index:"2"},on:{click:function(e){return t.routeto("/createWo")}}},[t._v("新建工单")]),o("el-menu-item",{attrs:{index:"3",disabled:""}},[t._v("消息中心")]),o("el-menu-item",{attrs:{index:"4"},on:{click:function(e){return t.routeto("/woQuery")}}},[t._v("工单管理")])],1),o("el-divider",{attrs:{"content-position":"left"}},[t._v("欢迎进入wo系统"+t._s(" "+t.adminInfo.admin_name))]),o("router-view")],1)},r=[],i={name:"Home",components:{},data:function(){return{activeIndex:"1",activeIndex2:"1",adminInfo:JSON.parse(sessionStorage.getItem("me"))}},methods:{handleSelect:function(t,e){},routeto:function(t){this.$router.push(t)},logout:function(){localStorage.setItem("me",null),localStorage.setItem("token",null),this.$router.push("/login")}}},a=i,l=o("2877"),s=Object(l["a"])(a,n,r,!1,null,null,null);e["default"]=s.exports},b727:function(t,e,o){var n=o("0366"),r=o("44ad"),i=o("7b0b"),a=o("50c4"),l=o("65f0"),s=[].push,u=function(t){var e=1==t,o=2==t,u=3==t,c=4==t,d=6==t,f=7==t,m=5==t||d;return function(p,h,b,_){for(var v,w,g=i(p),y=r(g),k=n(h,b,3),x=a(y.length),D=0,I=_||l,j=e?I(p,x):o||f?I(p,0):void 0;x>D;D++)if((m||D in y)&&(v=y[D],w=k(v,D,g),t))if(e)j[D]=w;else if(w)switch(t){case 3:return!0;case 5:return v;case 6:return D;case 2:s.call(j,v)}else switch(t){case 4:return!1;case 7:s.call(j,v)}return d?-1:u||c?c:j}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},c5cb:function(t,e,o){"use strict";o("6623")},cafe:function(t,e,o){},df5a:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"createWo"},[o("div",{staticClass:"w"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"工单名称"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"所属项目"}},[o("el-select",{attrs:{placeholder:"请选择项目"},model:{value:t.form.project.id,callback:function(e){t.$set(t.form.project,"id",e)},expression:"form.project.id"}},t._l(t.project_ops,(function(t,e){return o("el-option",{key:"pro"+e,attrs:{label:t.title,value:t.id}})})),1)],1),o("el-form-item",{attrs:{label:"分配"}},[o("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择coder"},model:{value:t.form.coder_ids,callback:function(e){t.$set(t.form,"coder_ids",e)},expression:"form.coder_ids"}},t._l(t.coders,(function(t){return o("el-option",{key:t.id+"coder",attrs:{label:t.admin_name,value:t.id}})})),1)],1),o("el-form-item",{attrs:{label:"预计完成时间"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),o("el-form-item",[o("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{focus:function(e){return t.onEditorFocus(e)},blur:function(e){return t.onEditorBlur(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.newcreateWo}},[t._v("立即创建")]),o("el-button",[t._v("取消")])],1)],1)],1)])},r=[],i=(o("b0c0"),o("327f")),a=o("2612"),l=o("24d2"),s={created:function(){this.getAllUser(),this.getProjectList()},mounted:function(){this.editor=this.$refs.myQuillEditor.quill},components:{},data:function(){return{content:null,editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},form:{name:"",project:{id:null,title:""},coder_ids:[],date:"",delivery:!1,type:[],resource:"",desc:""},project_ops:[],coders:[],value:""}},beforeDestroy:function(){this.editor=null,delete this.editor},methods:{getAllUser:function(){var t=this;Object(a["b"])().then((function(e){t.coders=e.data})).catch((function(e){t.$message.error("获取用户列表失败")}))},getProjectList:function(){var t=this;Object(l["a"])({}).then((function(e){t.project_ops=e.data})).catch((function(e){t.$message.error("获取项目列表失败")}))},onEditorReady:function(t){},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorChange:function(t){},newcreateWo:function(){var t=this;console.log("submit!");var e={title:this.form.name,creator_id:JSON.parse(sessionStorage.getItem("me")).id,detail:this.content,distributPeople:this.form.coder_ids,project_id:this.form.project.id};Object(i["a"])(e).then((function(e){t.$message({message:"操作成功，工单完成创建",type:"success"})})).catch((function(e){console.log(e),t.$message.error("操作失败，工单创建失败")}))}}},u=s,c=(o("80d2"),o("2877")),d=Object(c["a"])(u,n,r,!1,null,null,null);e["default"]=d.exports},e8b5:function(t,e,o){var n=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);